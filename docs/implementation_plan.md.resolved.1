# Implementación Fase 2: Infraestructura y Persistencia (EF Core Code First)

Esta fase se enfoca en conectar nuestro dominio con la base de datos usando Entity Framework Core y SQL Server.

## Proposed Changes

### [StarterLogin.Infrastructure]

#### [MODIFY] [StarterLogin.Infrastructure.csproj](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Infrastructure/StarterLogin.Infrastructure.csproj)
Agregar paquetes NuGet necesarios:
- `Microsoft.EntityFrameworkCore.SqlServer` (8.0.x)
- `Microsoft.EntityFrameworkCore.Tools` (8.0.x)
- `Microsoft.Extensions.Configuration`

#### [NEW] [ApplicationDbContext.cs](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Infrastructure/Persistence/ApplicationDbContext.cs)
Configuración central de EF Core.

#### [NEW] [UserConfiguration.cs](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Infrastructure/Persistence/Configurations/UserConfiguration.cs)
Configuración de Fluent API para el mapeo de la entidad [User](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Domain/Entities/User.cs#8-72) y sus Value Objects.

#### [NEW] [RoleConfiguration.cs](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Infrastructure/Persistence/Configurations/RoleConfiguration.cs)
Configuración de Fluent API para la entidad [Role](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Domain/Entities/Role.cs#11-12).

#### [NEW] [Repositories Implementation]
Implementación de [UserRepository](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Domain/Interfaces/IUserRepository.cs#8-16) y [UnitOfWork](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Domain/Interfaces/IUnitOfWork.cs#5-10).

#### [NEW] [DependencyInjection.cs](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Infrastructure/DependencyInjection.cs)
Método de extensión para registrar servicios de infraestructura.

### [StarterLogin.Api]

#### [MODIFY] [appsettings.json](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Api/appsettings.json)
Configurar la cadena de conexión.

#### [MODIFY] [Program.cs](file:///home/mylisuthy/Escritorio/starterLogin/LogiBackend/src/StarterLogin.Api/Program.cs)
Registrar la infraestructura en el contenedor IoC.

## Verification Plan

### Automated Tests
- Ejecutar migraciones: `dotnet ef migrations add InitialMigration --project StarterLogin.Infrastructure --startup-project StarterLogin.Api`
- Update database: `dotnet ef database update --project StarterLogin.Infrastructure --startup-project StarterLogin.Api`

### Manual Verification
- Verificar la creación de la base de datos y las tablas mediante un cliente SQL o Swagger (cuando esté listo).
